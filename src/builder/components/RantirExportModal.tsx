import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";
import { Download } from "lucide-react";
import { useTheme } from "next-themes";

interface RantirExportModalProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  onExport: () => void;
  projectName: string;
}

const RantirLogo = ({ isDark }: { isDark: boolean }) => (
  <svg width="258" height="46" viewBox="0 0 258 46" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-full h-auto">
    <g clipPath="url(#clip0_3517_11)">
      <path d="M72.4512 39.9999V23.6799H77.1552V27.5199H77.2512V39.9999H72.4512ZM77.2512 31.4879L76.8352 27.6159C77.2192 26.2292 77.8485 25.1732 78.7232 24.4479C79.5978 23.7225 80.6858 23.3599 81.9872 23.3599C82.3925 23.3599 82.6912 23.4025 82.8832 23.4879V27.9679C82.7765 27.9252 82.6272 27.9039 82.4352 27.9039C82.2432 27.8825 82.0085 27.8719 81.7312 27.8719C80.1952 27.8719 79.0645 28.1492 78.3392 28.7039C77.6138 29.2372 77.2512 30.1652 77.2512 31.4879Z" fill={isDark ? "#FFFFFF" : "#141526"}/>
      <path d="M65.4263 39.9999V23.6799H70.2263V39.9999H65.4263Z" fill={isDark ? "#FFFFFF" : "#141526"}/>
      <path d="M61.4577 40.352C59.367 40.352 57.8097 39.8507 56.7857 38.848C55.783 37.824 55.2817 36.2773 55.2817 34.208V20.032L60.0817 18.5V34.368C60.0817 35.0933 60.2844 35.6373 60.6897 36C61.095 36.3627 61.7244 36.544 62.5777 36.544C62.8977 36.544 63.1964 36.512 63.4737 36.448C63.751 36.384 64.0284 36.3093 64.3057 36.224V39.872C64.0284 40.0213 63.6337 40.1387 63.1217 40.224C62.631 40.3093 62.0764 40.352 61.4577 40.352ZM52.2417 27.328V23.68H64.3057V27.328H52.2417Z" fill={isDark ? "#FFFFFF" : "#141526"}/>
      <path d="M36.1887 39.9999L36.2087 26.4999L40.8927 24.9999V27.5199H40.9887V39.9999H36.1887ZM47.5487 39.9999V29.8879C47.5487 28.9919 47.3141 28.3199 46.8447 27.8719C46.3967 27.4239 45.7354 27.1999 44.8607 27.1999C44.1141 27.1999 43.4421 27.3705 42.8447 27.7119C42.2687 28.0532 41.8101 28.5225 41.4687 29.1199C41.1487 29.7172 40.9887 30.4212 40.9887 31.2319L40.5727 27.2959C41.106 26.1012 41.8847 25.1519 42.9087 24.4479C43.9541 23.7225 45.2341 23.3599 46.7487 23.3599C48.5621 23.3599 49.9487 23.8719 50.9087 24.8959C51.8687 25.8985 52.3487 27.2532 52.3487 28.9599V39.9999H47.5487Z" fill={isDark ? "#FFFFFF" : "#141526"}/>
      <path d="M0 16.96L10.4947 16.96C12.1587 16.96 13.6094 17.248 14.8467 17.824C16.0841 18.3786 17.0441 19.168 17.7267 20.192C18.4094 21.216 18.7507 22.4106 18.7507 23.776C18.7507 25.12 18.4094 26.304 17.7267 27.328C17.0441 28.3306 16.0841 29.12 14.8467 29.696C13.6094 30.2506 12.1587 30.528 10.4947 30.528H5.86346L3 26.912H10.3667C11.5401 26.912 12.4361 26.6453 13.0547 26.112C13.6947 25.5573 14.0147 24.7893 14.0147 23.808C14.0147 22.8053 13.7054 22.048 13.0867 21.536C12.4681 21.0026 11.5614 20.736 10.3667 20.736H2L0 16.96ZM13.1827 40L3.93473 28.032H9.15073L19.8387 40H13.1827Z" fill={isDark ? "#FFFFFF" : "#141526"}/>
      <path d="M33.7236 27.0747C33.973 27.7709 34.0996 28.5589 34.0996 29.4399V36.6401C34.0996 37.1734 34.1313 37.7174 34.1953 38.272C34.2806 38.8052 34.4085 39.381 34.5791 39.9995H29.7793C29.6513 39.5303 29.5552 39.0288 29.4912 38.4956C29.4632 38.1451 29.4452 37.7577 29.4355 37.3335C28.9816 38.2106 28.3714 38.8972 27.6035 39.3921C26.6435 40.0107 25.4696 40.3198 24.083 40.3198C22.4621 40.3197 21.1718 39.9144 20.2119 39.104C19.252 38.2721 18.7715 37.1733 18.7715 35.8081C18.7715 34.2934 19.3371 33.077 20.4678 32.1597C21.6198 31.2211 23.2197 30.6128 25.2676 30.3354L29.2998 29.7671V28.9282C29.2998 28.7024 29.271 28.4942 29.2188 28.3032L33.7236 27.0747ZM26.0674 33.0562C25.2141 33.1842 24.585 33.4189 24.1797 33.7603C23.7745 34.1015 23.5714 34.5704 23.5713 35.1675C23.5713 35.7008 23.7635 36.1069 24.1475 36.3843C24.5314 36.6615 25.0437 36.8003 25.6836 36.8003C26.6862 36.8003 27.5392 36.5328 28.2432 35.9995C28.9472 35.4448 29.2998 34.8049 29.2998 34.0796V32.5601L26.0674 33.0562ZM26.8672 23.3599C29.2138 23.3599 31.0058 23.8829 32.2432 24.9282C32.5288 25.1695 32.7803 25.4359 33 25.7261L28.8516 27.6118C28.7839 27.5342 28.7111 27.4594 28.6279 27.3921C28.2013 27.0081 27.5604 26.8159 26.707 26.8159C25.8967 26.816 25.2464 26.9547 24.7559 27.2319C24.2865 27.5093 23.9765 27.9144 23.8271 28.4478H19.252C19.4653 26.9759 20.2223 25.7602 21.5234 24.8003C22.8247 23.8403 24.606 23.3599 26.8672 23.3599Z" fill={isDark ? "#FFFFFF" : "#141526"}/>
      <path d="M71.6684 25.9727L68.395 18.8722C67.4212 16.9352 65.669 15.3158 63.1595 16.2032L26.5 29L62.2188 13.7823C64.1558 12.8086 65.2485 10.6932 64.8878 8.54688L63.5367 0.114162L67.3087 7.60617C68.2824 9.54313 70.3978 10.6359 72.5441 10.2752L80.9768 8.92405L73.4848 12.696C71.5479 13.6698 70.6693 16.3149 70.8158 17.9315L71.6684 25.9727Z" fill={isDark ? "#FFFFFF" : "#141526"}/>
      <path d="M86.229 40V21.5927H97.2662V23.57H88.458V29.7897H96.4393V31.767H88.458V40H86.229ZM100.648 40V26.1945H102.697V28.2797H102.841C103.093 27.5966 103.548 27.0424 104.207 26.617C104.866 26.1915 105.609 25.9788 106.436 25.9788C106.592 25.9788 106.787 25.9818 107.02 25.9878C107.254 25.9938 107.431 26.0028 107.551 26.0148V28.1719C107.479 28.1539 107.314 28.1269 107.056 28.091C106.805 28.049 106.538 28.0281 106.256 28.0281C105.585 28.0281 104.986 28.1689 104.459 28.4505C103.937 28.7261 103.524 29.1096 103.218 29.601C102.919 30.0863 102.769 30.6406 102.769 31.2637V40H100.648ZM114.128 40.3236C113.253 40.3236 112.459 40.1588 111.746 39.8292C111.033 39.4937 110.466 39.0113 110.047 38.3822C109.628 37.747 109.418 36.9801 109.418 36.0813C109.418 35.2903 109.574 34.6492 109.885 34.1578C110.197 33.6605 110.613 33.271 111.135 32.9894C111.656 32.7078 112.231 32.4981 112.86 32.3603C113.495 32.2164 114.134 32.1026 114.775 32.0187C115.614 31.9109 116.294 31.83 116.815 31.776C117.342 31.7161 117.726 31.6172 117.965 31.4794C118.211 31.3416 118.334 31.1019 118.334 30.7604V30.6885C118.334 29.8017 118.091 29.1126 117.606 28.6213C117.127 28.1299 116.399 27.8843 115.422 27.8843C114.409 27.8843 113.615 28.106 113.04 28.5494C112.465 28.9928 112.06 29.4661 111.827 29.9695L109.813 29.2504C110.173 28.4116 110.652 27.7584 111.251 27.2911C111.857 26.8177 112.516 26.4881 113.229 26.3024C113.948 26.1106 114.655 26.0148 115.35 26.0148C115.793 26.0148 116.303 26.0687 116.878 26.1766C117.459 26.2784 118.019 26.4911 118.559 26.8147C119.104 27.1383 119.556 27.6266 119.916 28.2797C120.275 28.9329 120.455 29.8077 120.455 30.9042V40H118.334V38.1305H118.226C118.082 38.4301 117.843 38.7507 117.507 39.0922C117.171 39.4338 116.725 39.7244 116.168 39.964C115.611 40.2037 114.93 40.3236 114.128 40.3236ZM114.451 38.4181C115.29 38.4181 115.997 38.2533 116.572 37.9238C117.154 37.5942 117.591 37.1688 117.885 36.6475C118.184 36.1262 118.334 35.5779 118.334 35.0027V33.0613C118.244 33.1692 118.046 33.268 117.741 33.3579C117.441 33.4418 117.094 33.5167 116.698 33.5826C116.309 33.6425 115.928 33.6965 115.557 33.7444C115.191 33.7863 114.895 33.8223 114.667 33.8523C114.116 33.9242 113.6 34.041 113.121 34.2028C112.648 34.3586 112.264 34.5953 111.97 34.9128C111.683 35.2244 111.539 35.6498 111.539 36.1891C111.539 36.9261 111.812 37.4834 112.357 37.8609C112.908 38.2324 113.606 38.4181 114.451 38.4181ZM124.327 40V26.1945H126.376V28.3516H126.556C126.843 27.6146 127.308 27.0424 127.949 26.6349C128.59 26.2215 129.36 26.0148 130.259 26.0148C131.169 26.0148 131.927 26.2215 132.533 26.6349C133.144 27.0424 133.62 27.6146 133.962 28.3516H134.106C134.459 27.6386 134.989 27.0723 135.696 26.6529C136.403 26.2275 137.251 26.0148 138.24 26.0148C139.474 26.0148 140.484 26.4012 141.269 27.1742C142.054 27.9412 142.446 29.1366 142.446 30.7604V40H140.325V30.7604C140.325 29.7418 140.047 29.0137 139.489 28.5763C138.932 28.1389 138.276 27.9202 137.521 27.9202C136.55 27.9202 135.798 28.2138 135.265 28.801C134.732 29.3822 134.465 30.1193 134.465 31.0121V40H132.308V30.5447C132.308 29.7597 132.053 29.1276 131.544 28.6482C131.035 28.1629 130.379 27.9202 129.576 27.9202C129.024 27.9202 128.509 28.067 128.03 28.3606C127.556 28.6542 127.173 29.0617 126.879 29.583C126.592 30.0983 126.448 30.6945 126.448 31.3716V40H124.327ZM152.113 40.2876C150.783 40.2876 149.635 39.994 148.67 39.4068C147.712 38.8136 146.972 37.9867 146.45 36.9261C145.935 35.8596 145.677 34.6192 145.677 33.2051C145.677 31.791 145.935 30.5447 146.45 29.4661C146.972 28.3816 147.697 27.5367 148.626 26.9315C149.56 26.3204 150.651 26.0148 151.897 26.0148C152.616 26.0148 153.326 26.1346 154.027 26.3743C154.728 26.614 155.366 27.0034 155.942 27.5427C156.517 28.076 156.975 28.7831 157.317 29.6639C157.658 30.5447 157.829 31.6292 157.829 32.9175V33.8163H147.187V31.9828H155.672C155.672 31.2038 155.516 30.5087 155.205 29.8976C154.899 29.2864 154.462 28.804 153.892 28.4505C153.329 28.097 152.664 27.9202 151.897 27.9202C151.052 27.9202 150.321 28.1299 149.704 28.5494C149.093 28.9628 148.623 29.5021 148.293 30.1672C147.963 30.8323 147.799 31.5453 147.799 32.3063V33.5287C147.799 34.5713 147.978 35.4551 148.338 36.1801C148.703 36.8992 149.21 37.4474 149.857 37.8249C150.504 38.1964 151.256 38.3822 152.113 38.3822C152.67 38.3822 153.173 38.3043 153.623 38.1485C154.078 37.9867 154.471 37.747 154.8 37.4294C155.13 37.1059 155.384 36.7044 155.564 36.2251L157.613 36.8003C157.398 37.4954 157.035 38.1065 156.526 38.6338C156.017 39.1551 155.387 39.5626 154.638 39.8562C153.889 40.1438 153.048 40.2876 152.113 40.2876ZM164.184 40L159.977 26.1945H162.206L165.19 36.7643H165.334L168.282 26.1945H170.547L173.459 36.7284H173.603L176.587 26.1945H178.816L174.61 40H172.524L169.505 29.3942H169.289L166.269 40H164.184ZM186.759 40.2876C185.513 40.2876 184.419 39.991 183.478 39.3978C182.544 38.8046 181.813 37.9747 181.285 36.9081C180.764 35.8416 180.503 34.5953 180.503 33.1692C180.503 31.7311 180.764 30.4758 181.285 29.4032C181.813 28.3307 182.544 27.4978 183.478 26.9046C184.419 26.3114 185.513 26.0148 186.759 26.0148C188.005 26.0148 189.096 26.3114 190.031 26.9046C190.971 27.4978 191.702 28.3307 192.224 29.4032C192.751 30.4758 193.015 31.7311 193.015 33.1692C193.015 34.5953 192.751 35.8416 192.224 36.9081C191.702 37.9747 190.971 38.8046 190.031 39.3978C189.096 39.991 188.005 40.2876 186.759 40.2876ZM186.759 38.3822C187.706 38.3822 188.485 38.1395 189.096 37.6541C189.707 37.1688 190.16 36.5307 190.453 35.7397C190.747 34.9488 190.894 34.0919 190.894 33.1692C190.894 32.2464 190.747 31.3866 190.453 30.5896C190.16 29.7927 189.707 29.1486 189.096 28.6572C188.485 28.1659 187.706 27.9202 186.759 27.9202C185.812 27.9202 185.033 28.1659 184.422 28.6572C183.811 29.1486 183.359 29.7927 183.065 30.5896C182.771 31.3866 182.625 32.2464 182.625 33.1692C182.625 34.0919 182.771 34.9488 183.065 35.7397C183.359 36.5307 183.811 37.1688 184.422 37.6541C185.033 38.1395 185.812 38.3822 186.759 38.3822ZM196.253 40V26.1945H198.302V28.2797H198.446C198.697 27.5966 199.153 27.0424 199.812 26.617C200.471 26.1915 201.214 25.9788 202.041 25.9788C202.197 25.9788 202.391 25.9818 202.625 25.9878C202.859 25.9938 203.036 26.0028 203.155 26.0148V28.1719C203.083 28.1539 202.919 28.1269 202.661 28.091C202.409 28.049 202.143 28.0281 201.861 28.0281C201.19 28.0281 200.591 28.1689 200.063 28.4505C199.542 28.7261 199.129 29.1096 198.823 29.601C198.524 30.0863 198.374 30.6406 198.374 31.2637V40H196.253ZM207.647 34.9668L207.611 32.3423H208.043L214.082 26.1945H216.707L210.272 32.7018H210.092L207.647 34.9668ZM205.67 40V21.5927H207.791V40H205.67ZM214.442 40L209.049 33.1692L210.559 31.6951L217.138 40H214.442ZM223.668 38.7417V26.8776H225.681V38.7417H223.668ZM218.743 33.8163V31.803H230.607V33.8163H218.743Z" fill="black"/>
      <path d="M240.83 39.5618C239.633 38.4678 239.284 36.1694 239.783 34.5043C240.647 35.554 241.845 35.8867 243.086 36.0743C245.001 36.364 246.882 36.2557 248.661 35.3803C248.865 35.2801 249.053 35.1466 249.275 35.0118C249.442 35.496 249.486 35.985 249.427 36.4827C249.286 37.6948 248.682 38.6312 247.723 39.3409C247.339 39.6248 246.933 39.8786 246.537 40.1464C245.32 40.9688 244.991 41.9336 245.448 43.3369C245.459 43.3711 245.469 43.4053 245.493 43.4887C244.872 43.2106 244.418 42.8056 244.072 42.2732C243.706 41.7111 243.533 41.0894 243.524 40.4168C243.519 40.0894 243.519 39.7591 243.475 39.4365C243.367 38.6498 242.998 38.2975 242.302 38.2771C241.588 38.2564 241.023 38.6977 240.873 39.393C240.862 39.4463 240.845 39.499 240.829 39.561L240.83 39.5618Z" fill="#17191E"/>
      <path d="M234 34.2267C234 34.2267 237.544 32.5006 241.097 32.5006L243.776 24.209C243.876 23.8081 244.169 23.5355 244.5 23.5355C244.831 23.5355 245.123 23.8081 245.224 24.209L247.903 32.5006C252.111 32.5006 255 34.2267 255 34.2267C255 34.2267 248.981 17.8299 248.969 17.797C248.796 17.3122 248.505 17 248.112 17H240.889C240.496 17 240.216 17.3122 240.031 17.797C240.018 17.8293 234 34.2267 234 34.2267Z" fill="#17191E"/>
    </g>
    <defs>
      <clipPath id="clip0_3517_11">
        <rect width="258" height="46" fill="white"/>
      </clipPath>
    </defs>
  </svg>
);

export function RantirExportModal({ open, onOpenChange, onExport, projectName }: RantirExportModalProps) {
  const { theme } = useTheme();
  const isDark = theme === "dark";

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="max-w-[420px]">
        <DialogHeader>
          <div className="mb-4">
            <RantirLogo isDark={isDark} />
          </div>
          <DialogTitle className="text-xl font-bold">Export Rantir Framework</DialogTitle>
          <DialogDescription className="text-sm leading-relaxed pt-2">
            Astro is a web framework that takes the best from the early internet (think HTML and CSS) and puts it to work in a next-gen architecture to make every Astro site, and the whole web, faster. Rantir is a modified framework that extends this with TIR template capabilities.
          </DialogDescription>
        </DialogHeader>
        
        <div className="flex flex-col gap-3 pt-4">
          <div className="text-xs text-muted-foreground">
            Project: <span className="font-semibold text-foreground">{projectName}</span>
          </div>
          
          <Button onClick={onExport} className="w-full" size="lg">
            <Download className="w-4 h-4 mr-2" />
            Export Project
          </Button>
        </div>
      </DialogContent>
    </Dialog>
  );
}
